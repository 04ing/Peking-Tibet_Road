# 京藏古道人文环境时空信息开放平台

## 项目概述

京藏古道人文环境时空信息开放平台是一个专注于元代北京至西藏驿路历史文化的综合性网站。该平台旨在通过数字化技术，展示京藏古道的历史沿革、文化内涵、线性文化遗产分布等内容，为研究人员、文化爱好者和旅游从业者提供丰富的历史文化资源。

### 项目目标

- **数字化保护**：通过数字技术记录和保护京藏古道的历史文化遗产
- **学术研究**：为学者提供系统化的历史资料和研究工具
- **文化传播**：向公众传播京藏古道的历史文化价值
- **旅游开发**：基于历史文化资源，为沿线地区的旅游发展提供支持

### 核心价值

- **历史价值**：重现元代北京至西藏驿路的历史面貌
- **文化价值**：展示多民族文化交流融合的历史轨迹
- **学术价值**：为相关研究提供数据支持和可视化工具
- **社会价值**：促进文化遗产保护和区域文化旅游发展

## 最新更新

- **2026-02-25**：后端服务实现和前端功能优化
  - 实现了基于 Node.js 和 Express.js 的后端服务
  - 添加了用户注册和登录功能，使用 JWT 进行身份认证
  - 优化了前端搜索功能，修复了模板加载导致的搜索元素不存在问题
  - 改进了后端错误处理，避免数据库操作超时错误
  - 使用内存存储实现了用户信息的临时存储

- **2026-02-24**：CSS 优化和模块化
  - 将大型 style.css 文件拆分为多个小型模块化 CSS 文件
  - 按功能模块组织 CSS（base.css, navbar.css, hero.css, intro.css 等）
  - 移除了重复的 CSS 代码
  - 修复了导航栏样式，将搜索框移动到最右侧
  - 优化了响应式设计

- **2026-02-24**：SEO 优化和链接结构改进
  - 为所有 HTML 页面添加独特的 meta 标签（标题、描述、关键词）
  - 优化页面间的内部链接结构，确保链接路径正确
  - 修复所有导航链接的相对路径
  - 更新 README.md 文件，添加详细的项目说明、本地运行指南和贡献指南

- **2026-02-23**：优化文件结构，按功能划分目录
  - 将除 index.html 外的所有 HTML 文件移动到 pages 文件夹
  - 将 PDF 和 MP4 文件移动到 source 文件夹
  - 更新所有文件路径以反映新的目录结构
  - 修复 dataset 相关页面的 CSS 和 JS 引用路径
  - 修复所有页面的导航栏链接和页脚链接
- **2026-02-16**：调整路线数据中的站点坐标，确保所有站点都在对应的路线上
- **2026-02-15**：添加路线点击显示信息功能，并为各支线上添加站点
- **2026-02-15**：修复车辆动画循环逻辑，确保小车从起点运动到终点后正确重新开始
- **2026-02-15**：修改车辆移动速度，使其更慢、更平滑
- **2026-02-15**：从 JSON 文件加载路线和节点数据，实现数据与代码分离
- **2026-02-12**：修复历史事件时间轴在 GitHub Pages 上的显示问题，优化页面加载速度
- **2026-02-11**：添加线性文化遗产页面的古墓葬图标显示功能
- **2026-02-10**：优化时间轴样式，使用棕色主轴、黄色事件点和绿色五角星重要事件标记
- **2026-02-09**：完善项目结构，添加详细的 README.md 文件

## 主要功能

### 1. 古道探索
- 历史沿革：介绍京藏古道的形成、发展和演变历史
- 文化内涵：展示古道沿线的宗教、艺术、建筑等文化元素
- 旅游攻略：提供基于古道的旅游路线和景点推荐

### 2. 地图展示
- 元代京藏古道路线复原图
- 文化遗产分布地图
- 古墓葬分布地图

### 3. 数据集
- 考古遗址数据
- 历史文献数据
- 文化遗产数据

### 4. 线性文化遗产
- 遗产识别与分类
- 遗产价值评估
- 保护策略研究

### 5. 历史事件脉络
- 交互式时间轴展示
- 重要历史事件详情
- 事件关联分析

## 技术栈

- **前端**：HTML5, CSS3, JavaScript
- **后端**：Node.js, Express.js
- **认证**：JWT (JSON Web Token)
- **地图可视化**：Leaflet.js, 高德地图 API
- **数据可视化**：D3.js
- **时间轴可视化**：Vis.js
- **数据处理**：Fetch API, JSON
- **样式设计**：自定义 CSS, Font Awesome 图标库

## 项目结构

```
├── index.html              # 首页
├── pages/                  # 页面文件夹
│   ├── route.html          # 古道路线页面
│   ├── culture.html        # 文化内涵页面
│   ├── travel.html         # 旅游攻略页面
│   ├── heritage.html       # 线性文化遗产页面
│   ├── events.html         # 历史事件页面
│   ├── yuan-dynasty-map.html # 元代地图页面
│   ├── artifacts_map.html  # 文物分布地图页面
│   ├── dataset-archaeology.html # 考古遗址数据集页面
│   ├── dataset-history.html # 历史文献数据集页面
│   ├── dataset-images.html # 图像数据集页面
│   ├── dataset-geography.html # 地理数据集页面
│   └── pdf-viewer.html     # PDF 查看器页面
├── source/                 # 资源文件夹
│   ├── *.pdf               # PDF 文件
│   └── *.mp4               # MP4 文件
├── css/                    # 样式文件
│   ├── style.css           # 主样式文件
│   ├── base.css            # 基础样式
│   ├── navbar.css          # 导航栏样式
│   ├── hero.css            # 英雄区域样式
│   ├── intro.css           # 介绍区域样式
│   ├── explore.css         # 探索区域样式
│   ├── map.css             # 地图区域样式
│   ├── dataset.css         # 数据集样式
│   ├── culture.css         # 文化内涵样式
│   ├── travel.css          # 旅游攻略页面样式
│   ├── travel-new.css      # 新旅游攻略样式
│   ├── heritage.css        # 线性文化遗产页面样式
│   ├── timeline.css        # 时间轴样式
│   ├── pdf-viewer.css      # PDF 查看器样式
│   ├── animation.css       # 动画效果样式
│   ├── video.css           # 视频样式
│   └── responsive.css      # 响应式设计样式
├── js/                     # JavaScript 文件
│   ├── main.js             # 主脚本文件
│   └── template-loader.js  # 模板加载脚本
├── templates/              # 模板文件
│   └── navbar.html         # 导航栏模板
├── routes/                 # 后端路由
│   └── auth.js             # 认证路由
├── models/                 # 数据模型
│   └── User.js             # 用户模型
├── json/                   # JSON 数据文件
│   ├── route-data.json     # 路线数据
│   ├── cultural-relics.json # 文化遗产数据
│   └── Inheritors.geojson  # 传承人数据
├── img/                    # 图片文件
│   ├── 古墓.png            # 古墓葬图标
│   ├── 0a8b2cf28f9e7b68642454ee9cb2562c_c4c938cb-954f-495e-9860-cd1097844177.jpg
│   └── f7e2361cc2156a23ae21dbc11f3a85db_14d3d4ea-b6e3-4929-8d3c-86092c9e7f76.jpg
├── server.js               # 后端服务器文件
├── package.json            # 项目配置文件
├── .env                    # 环境变量文件
├── .gitignore              # Git 忽略文件
└── README.md               # 项目说明文件
```

## 数据来源

- 历史文献：《元史》、《明实录》、《清实录》等
- 考古资料：相关考古报告和研究成果
- 地图数据：基于历史地图和现代地理信息

## 本地运行指南

### 方法一：使用 Python 启动 HTTP 服务器

1. 克隆项目到本地
   ```bash
   git clone https://github.com/04ing/Peking-Tibet_Road.git
   cd Peking-Tibet_Road
   ```

2. 根据 Python 版本启动服务器
   ```bash
   # 使用 Python 3
   python -m http.server 8000
   
   # 或使用 Python 2
   python -m SimpleHTTPServer 8000
   ```

3. 在浏览器中访问
   ```
   http://localhost:8000
   ```

### 方法二：使用 Node.js 启动 HTTP 服务器

1. 确保已安装 Node.js

2. 安装 http-server 包
   ```bash
   npm install -g http-server
   ```

3. 在项目目录中启动服务器
   ```bash
   http-server -p 8000
   ```

4. 在浏览器中访问
   ```
   http://localhost:8000
   ```

### 方法三：使用项目自带的 Node.js 后端服务

1. 确保已安装 Node.js

2. 安装项目依赖
   ```bash
   npm install
   ```

3. 启动后端服务器
   ```bash
   node server.js
   ```

4. 在浏览器中访问
   ```
   http://localhost:3000
   ```

   后端服务会同时提供前端静态文件和 API 接口，包括用户注册和登录功能。

### 方法四：使用 VS Code 扩展

1. 在 VS Code 中安装 "Live Server" 扩展

2. 打开项目文件夹

3. 右键点击 `index.html` 文件，选择 "Open with Live Server"

4. 浏览器会自动打开项目页面

### 注意事项

- 由于项目使用了 Fetch API 加载本地 JSON 文件，必须通过 HTTP 服务器访问，直接双击 HTML 文件在浏览器中打开会导致跨域错误
- 确保端口 8000 未被其他应用占用，如有占用可使用其他端口，如 `python -m http.server 3000`
- 首次加载可能需要一些时间，特别是地图和图表等大型组件

## 贡献指南

### 贡献流程

1. **Fork 项目仓库**
   - 在 GitHub 上点击 "Fork" 按钮，将项目复制到您的个人账号

2. **克隆 Fork 的仓库**
   ```bash
   git clone https://github.com/您的用户名/Peking-Tibet_Road.git
   cd Peking-Tibet_Road
   ```

3. **创建功能分支**
   ```bash
   git checkout -b feature/您的功能名称
   ```

4. **进行更改**
   - 编写代码或修改文件
   - 确保代码符合项目的代码风格

5. **提交更改**
   ```bash
   git add .
   git commit -m "清晰的提交消息，描述您的更改"
   ```

6. **推送到 GitHub**
   ```bash
   git push origin feature/您的功能名称
   ```

7. **发起 Pull Request**
   - 在 GitHub 上导航到您的 Fork
   - 点击 "Pull request" 按钮
   - 填写详细的 PR 描述，说明您的更改内容和目的

### 代码风格指南

- **HTML**
  - 使用语义化标签
  - 缩进使用 2 个空格
  - 双引号包裹属性值

- **CSS**
  - 使用小写字母和连字符命名类和 ID
  - 缩进使用 2 个空格
  - 每个属性占一行
  - 使用简写属性时保持一致性

- **JavaScript**
  - 使用驼峰命名法
  - 缩进使用 2 个空格
  - 使用单引号
  - 每行不超过 80 个字符
  - 添加适当的注释

### 提交规范

提交消息应遵循以下格式：

```
<类型>: <描述>

<详细说明>（可选）

<引用相关 Issue>（可选）
```

**类型** 可以是：
- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档更新
- `style`: 代码风格更改
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建或依赖更新

**示例**：
```
feat: 添加地图缩放控制功能

为所有地图页面添加了缩放控制按钮，提升用户体验

Closes #123
```

### 问题报告

如果您发现问题，请在 GitHub Issues 中报告，包括以下信息：

1. 问题描述
2. 重现步骤
3. 预期行为
4. 实际行为
5. 浏览器信息
6. 截图（如果适用）

### 功能请求

如果您有新功能想法，请在 GitHub Issues 中提出，包括以下信息：

1. 功能描述
2. 功能的价值和用途
3. 实现思路（可选）
4. 相关参考资料（可选）

我们欢迎所有形式的贡献，无论是代码、文档、设计还是建议！

## 版权信息

© 2026 京藏古道人文环境时空信息开放平台

本项目仅供学术研究和文化传播使用，未经授权不得用于商业目的。

## 联系方式

- 邮箱：contact@jzgd-platform.org
- 电话：XXX-XXXXXXXX