<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>历史事件脉络梳理 - 京藏古道人文环境时空信息开放平台</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/timeline.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous">
</head>
<body>
    <!-- 顶部导航栏 -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>京藏古道人文环境时空信息开放平台</h1>
                <p>元代北京至西藏的驿路文明</p>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">首页</a></li>
                    <li><a href="index.html#explore" class="active">古道探索</a></li>
                    <li><a href="index.html#map">地图展示</a></li>
                    <li><a href="index.html#dataset">数据集</a></li>
                    <li><a href="culture.html">文化内涵</a></li>
                    <li><a href="travel.html">旅游攻略</a></li>
                    <li><a href="index.html#about">关于平台</a></li>
                </ul>
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="搜索...">
                    <button id="search-button"><i class="fas fa-search"></i></button>
                </div>
            </nav>
        </div>
    </header>

    <!-- 页面标题 -->
    <section class="page-header">
        <div class="container">
            <h1>历史事件脉络梳理</h1>
            <p>梳理元代北京至西藏驿路上发生的重要历史事件，构建事件时间线，分析事件之间的关联关系</p>
        </div>
    </section>

    <!-- 事件梳理方法 -->
    <section class="events-method">
        <div class="container">
            <h2>事件梳理方法</h2>
            <div class="method-content">
                <div class="method-item">
                    <div class="method-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h3>文献史料梳理</h3>
                    <p>系统整理《元史》、《明实录》、《清实录》等正史资料，以及《经世大典》、《永乐大典》等政书类文献中关于京藏古道的历史事件记载。</p>
                </div>
                <div class="method-item">
                    <div class="method-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>时间序列构建</h3>
                    <p>以时间为轴线，构建元代北京至西藏驿路上的历史事件序列，明确事件发生的时间、地点和主要内容。</p>
                </div>
                <div class="method-item">
                    <div class="method-icon">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <h3>关联关系分析</h3>
                    <p>分析历史事件之间的因果关系、先后顺序和影响范围，揭示事件背后的历史规律和发展趋势。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 历史事件时间线 -->
    <section class="timeline">
        <div class="container">
            <h2>历史事件时间线</h2>
            <div id="event-timeline"></div>
        </div>
    </section>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        // 历史事件数据
        const eventsData = [
            {
                id: 1,
                title: '成吉思汗建立蒙古汗国',
                description: '铁木真统一蒙古各部，建立蒙古汗国，为后来的京藏古道建设奠定了政治基础。',
                date: '1206年',
                year: 1206,
                isKeyEvent: false
            },
            {
                id: 2,
                title: '蒙古灭西夏，控制河西走廊',
                description: '蒙古军队灭亡西夏，控制了河西走廊地区，为连接中原与西藏的交通奠定了基础。',
                date: '1227年',
                year: 1227,
                isKeyEvent: false
            },
            {
                id: 3,
                title: '蒙古军入藏',
                description: '蒙古皇子阔端派军进入西藏，与西藏地方势力建立联系。',
                date: '1239年',
                year: 1239,
                isKeyEvent: false
            },
            {
                id: 4,
                title: '凉州会盟',
                description: '萨迦派领袖萨班与蒙古皇子阔端在凉州（今甘肃武威）举行会盟，西藏正式归属蒙古汗国管辖，京藏古道开始形成。',
                impact: '确立了西藏与中央政权的隶属关系，开启了京藏之间的政治、经济、文化交流。',
                date: '1247年',
                year: 1247,
                isKeyEvent: true
            },
            {
                id: 5,
                title: '忽必烈建立元朝',
                description: '忽必烈定国号为元，建立元朝，定都大都（今北京），京藏古道的起点正式确立。',
                date: '1271年',
                year: 1271,
                isKeyEvent: false
            },
            {
                id: 6,
                title: '元朝统一中国',
                description: '元朝灭亡南宋，统一中国，为京藏古道的全面建设创造了条件。',
                date: '1279年',
                year: 1279,
                isKeyEvent: false
            },
            {
                id: 7,
                title: '设置吐蕃等处宣慰司都元帅府',
                description: '元朝在西藏地区设置吐蕃等处宣慰司都元帅府，加强对西藏的管辖，京藏古道的管理体系初步形成。',
                date: '1280年',
                year: 1280,
                isKeyEvent: false
            },
            {
                id: 8,
                title: '开通大都至西藏的驿路',
                description: '元朝正式开通从大都（今北京）至西藏的驿路，设置驿站，建立了完整的驿传体系。',
                impact: '形成了连接内地与西藏的官方通道，促进了两地之间的人员往来和物资交流。',
                date: '1292年',
                year: 1292,
                isKeyEvent: true
            },
            {
                id: 9,
                title: '修订驿路管理制度',
                description: '元朝修订驿路管理制度，明确驿站的职责和运行机制，提高了京藏古道的运行效率。',
                impact: '完善了驿路管理体系，保障了京藏古道的畅通，促进了沿线地区的发展。',
                date: '1304年',
                year: 1304,
                isKeyEvent: true
            },
            {
                id: 10,
                title: '元顺帝即位',
                description: '元顺帝妥懽帖睦尔即位，此时京藏古道已成为连接内地与西藏的重要通道。',
                date: '1333年',
                year: 1333,
                isKeyEvent: false
            },
            {
                id: 11,
                title: '红巾军起义爆发',
                description: '红巾军起义爆发，元朝统治开始动摇，京藏古道的管理受到影响。',
                date: '1351年',
                year: 1351,
                isKeyEvent: false
            },
            {
                id: 12,
                title: '明朝建立，元朝灭亡',
                description: '朱元璋建立明朝，元朝灭亡，京藏古道的元代历史结束，进入明朝管理时期。',
                date: '1368年',
                year: 1368,
                isKeyEvent: false
            }
        ];

        // 使用D3.js创建事件时间轴
        function initCustomTimeline() {
            const container = document.getElementById('event-timeline');
            
            // 清除现有内容
            container.innerHTML = '';
            
            // 设置尺寸
            const width = container.clientWidth || 800;
            const height = 150;
            const padding = { top: 20, right: 40, bottom: 40, left: 40 };
            
            // 创建SVG
            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height);
            
            // 计算时间范围
            const yearExtent = d3.extent(eventsData, d => d.year);
            const minYear = yearExtent[0] - 10;
            const maxYear = yearExtent[1] + 10;
            
            // 创建时间比例尺
            const xScale = d3.scaleLinear()
                .domain([minYear, maxYear])
                .range([padding.left, width - padding.right]);
            
            // 创建X轴
            const xAxis = d3.axisBottom(xScale)
                .tickFormat(d => d + '年')
                .ticks(8);
            
            // 添加时间轴线条
            svg.append('line')
                .attr('class', 'timeline-line')
                .attr('x1', padding.left)
                .attr('y1', height - padding.bottom + 5)
                .attr('x2', width - padding.right)
                .attr('y2', height - padding.bottom + 5)
                .style('stroke', '#8B4513')
                .style('stroke-width', 2);
            
            // 添加事件点
            const eventGroups = svg.selectAll('.event-group')
                .data(eventsData)
                .enter()
                .append('g')
                .attr('class', 'event-group')
                .style('cursor', 'pointer')
                .on('click', function(event, d) {
                    // 创建自定义弹窗
                    const modal = document.createElement('div');
                    modal.className = 'custom-modal';
                    modal.innerHTML = `
                        <div class="custom-modal-overlay"></div>
                        <div class="custom-modal-dialog">
                            <div class="custom-modal-content">
                                <div class="custom-modal-header">
                                    <h5 class="custom-modal-title">${d.title} (${d.date})</h5>
                                    <button type="button" class="custom-modal-close">&times;</button>
                                </div>
                                <div class="custom-modal-body">
                                    <div>
                                        <p>${d.description}</p>
                                        ${d.impact ? `<div class="event-impact"><h4>历史影响：</h4><p>${d.impact}</p></div>` : ''}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(modal);
                    modal.style.display = 'block';
                    
                    // 关闭弹窗
                    modal.querySelector('.custom-modal-close').addEventListener('click', function() {
                        modal.style.display = 'none';
                        document.body.removeChild(modal);
                    });
                    
                    // 点击背景关闭弹窗
                    modal.querySelector('.custom-modal-overlay').addEventListener('click', function() {
                        modal.style.display = 'none';
                        document.body.removeChild(modal);
                    });
                });
            
            // 添加事件点
            eventGroups.append('circle')
                .attr('cx', d => xScale(d.year))
                .attr('cy', height - padding.bottom + 5)
                .attr('r', d => d.isKeyEvent ? 8 : 6)
                .style('fill', d => d.isKeyEvent ? '#8B4513' : '#D2B48C')
                .style('stroke', '#8B4513')
                .style('stroke-width', 2);
            
            // 添加事件日期标签
            eventGroups.append('text')
                .attr('x', d => xScale(d.year))
                .attr('y', height - padding.bottom + 30)
                .attr('text-anchor', 'middle')
                .style('font-size', '12px')
                .text(d => d.date);
            
            // 添加悬停效果
            eventGroups.on('mouseover', function(event, d) {
                d3.select(this)
                    .select('circle')
                    .attr('r', d.isKeyEvent ? 10 : 8)
                    .style('opacity', 1);
            })
            .on('mouseout', function(event, d) {
                d3.select(this)
                    .select('circle')
                    .attr('r', d.isKeyEvent ? 8 : 6)
                    .style('opacity', 1);
            });
        }
        


        // 页面加载完成后初始化时间轴
        window.addEventListener('DOMContentLoaded', initCustomTimeline);
    </script>

    <!-- 重要历史事件 -->
    <section class="key-events">
        <div class="container">
            <h2>重要历史事件</h2>
            <div class="events-grid">
                <div class="event-card">
                    <h3>凉州会盟（1247年）</h3>
                    <p>萨迦派领袖萨班与蒙古皇子阔端在凉州举行会盟，西藏正式归属蒙古汗国管辖。这是京藏古道形成的重要标志，为后来的驿路建设奠定了政治基础。</p>
                    <div class="event-impact">
                        <h4>历史影响：</h4>
                        <p>确立了西藏与中央政权的隶属关系，开启了京藏之间的政治、经济、文化交流。</p>
                    </div>
                </div>
                <div class="event-card">
                    <h3>开通大都至西藏的驿路（1292年）</h3>
                    <p>元朝正式开通从大都（今北京）至西藏的驿路，设置驿站，建立了完整的驿传体系。这是京藏古道发展的重要里程碑。</p>
                    <div class="event-impact">
                        <h4>历史影响：</h4>
                        <p>形成了连接内地与西藏的官方通道，促进了两地之间的人员往来和物资交流。</p>
                    </div>
                </div>
                <div class="event-card">
                    <h3>修订驿路管理制度（1304年）</h3>
                    <p>元朝修订驿路管理制度，明确驿站的职责和运行机制，提高了京藏古道的运行效率。</p>
                    <div class="event-impact">
                        <h4>历史影响：</h4>
                        <p>完善了驿路管理体系，保障了京藏古道的畅通，促进了沿线地区的发展。</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 事件关联分析 -->
    <section class="event-analysis">
        <div class="container">
            <h2>事件关联分析</h2>
            <div class="analysis-content">
                <div class="analysis-item">
                    <h3>政治事件与驿路建设的关系</h3>
                    <p>元代京藏古道的建设与政治事件密切相关。从成吉思汗建立蒙古汗国，到凉州会盟，再到元朝统一中国，每一个重大政治事件都推动了驿路的发展。政治稳定时期，驿路建设得到重视，管理完善；政治动荡时期，驿路管理受到影响。</p>
                </div>
                <div class="analysis-item">
                    <h3>经济交流与驿路发展的互动</h3>
                    <p>京藏古道的发展促进了内地与西藏之间的经济交流，而经济交流的需求又推动了驿路的完善。通过驿路，内地的丝绸、茶叶、瓷器等物资传入西藏，西藏的马匹、药材、毛皮等特产传入内地，形成了互补性的经济关系。</p>
                </div>
                <div class="analysis-item">
                    <h3>文化传播与驿路的作用</h3>
                    <p>京藏古道不仅是政治、经济交流的通道，也是文化传播的桥梁。通过驿路，藏传佛教传入内地，内地的儒家文化、科技知识传入西藏，促进了两地文化的交流与融合。萨迦派在元朝的地位，就是文化传播的重要成果。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 历史意义 -->
    <section class="historical-significance">
        <div class="container">
            <h2>历史意义</h2>
            <div class="significance-content">
                <div class="significance-item">
                    <div class="significance-icon">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <h3>政治意义</h3>
                    <p>京藏古道的建设和运行，加强了中央政权对西藏的管辖，巩固了国家的统一，促进了民族的融合。</p>
                </div>
                <div class="significance-item">
                    <div class="significance-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <h3>经济意义</h3>
                    <p>京藏古道促进了内地与西藏之间的经济交流，推动了沿线地区的经济发展，形成了互补性的经济关系。</p>
                </div>
                <div class="significance-item">
                    <div class="significance-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <h3>文化意义</h3>
                    <p>京藏古道是文化传播的桥梁，促进了内地与西藏之间的文化交流与融合，丰富了中华文化的内涵。</p>
                </div>
                <div class="significance-item">
                    <div class="significance-icon">
                        <i class="fas fa-road"></i>
                    </div>
                    <h3>交通意义</h3>
                    <p>京藏古道是中国古代交通史上的重要组成部分，为后来的青藏公路、青藏铁路等交通线路的建设提供了历史借鉴。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 参考文献 -->
    <section class="references">
        <div class="container">
            <h2>参考文献</h2>
            <ul>
                <li>《元史》，中华书局，1976年</li>
                <li>《圣武亲征录》，中华书局，1985年</li>
                <li>《萨迦世系史》，西藏人民出版社，1989年</li>
                <li>陈得芝：《元代西藏史研究》，人民出版社，2013年</li>
                <li>王辅仁、陈庆英：《蒙藏关系史略》，中国社会科学出版社，1985年</li>
                <li>西藏自治区交通厅：《西藏古近代交通史》，人民交通出版社，1994年</li>
            </ul>
        </div>
    </section>

    <!-- 页脚 -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <h3>京藏古道人文环境时空信息开放平台</h3>
                    <p>元代北京至西藏的驿路文明</p>
                </div>
                <div class="footer-links">
                    <h4>快速链接</h4>
                    <ul>
                        <li><a href="index.html">首页</a></li>
                        <li><a href="index.html#explore">古道探索</a></li>
                        <li><a href="index.html#map">地图展示</a></li>
                        <li><a href="index.html#dataset">数据集</a></li>
                        <li><a href="index.html#about">关于平台</a></li>
                    </ul>
                </div>
                <div class="footer-contact">
                    <h4>联系方式</h4>
                    <p>邮箱：contact@jzgd-platform.org</p>
                    <p>电话：010-12345678</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 京藏古道人文环境时空信息开放平台 版权所有</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
</body>
</html>